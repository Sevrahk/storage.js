/* storage.js v1.2.0 | Copyright (c) 2015 https://github.com/Sevrahk/storage.js | MIT license */
!function(){"use strict";function e(e){switch(this._storageArea,e){case"session":this._storageArea=window.sessionStorage;break;case"cookie":this._storageArea=document.cookie,this._cookieValidityTime=31536e3;break;default:this._storageArea=window.localStorage}}function t(t){e.call(this,t)}function r(){e.call(this,"cookie")}e.prototype.checkKey=function(e){if("string"!=typeof e&&"number"!=typeof e||0===e.length)throw new TypeError("Key must be string or numeric.");return!0},e.prototype.rename=function(e,t,r){if(r=void 0!==r?r:!1,e!==t){if(this.checkKey(t),r===!1&&this.exists(t))throw new TypeError("The new key name already exists in the storage. If you want to replace it set overwrite parameter to true.");this.exists(e)&&(this.set(t,this.get(e)),this.remove(e))}},t.prototype=Object.create(e.prototype),t.prototype.set=function(e,t){this.checkKey(e),void 0!==t&&"function"!=typeof t&&("object"==typeof t&&(t=JSON.stringify(t)),this._storageArea[e]=t)},t.prototype.get=function(e){if(this.checkKey(e),void 0===this._storageArea[e])return void 0;try{return JSON.parse(this._storageArea[e])}catch(t){return this._storageArea[e]}return this._storageArea[e]},t.prototype.exists=function(e){return this.checkKey(e),void 0!==this._storageArea[e]},t.prototype.remove=function(e){if(e instanceof Array)for(var t in e)this._storageArea.removeItem(e[t]);else this._storageArea.removeItem(e)},t.prototype.clear=function(){this._storageArea.clear()},t.prototype.getKeys=function(){var e=[];for(var t in this._storageArea)e.push(t);return e},t.prototype.copyToOtherStorage=function(){var e=this._storageArea===window.localStorage?window.sessionStorage:window.localStorage;if("undefined"==typeof e)return void console.error("The other storage is not available.");if(0===arguments.length)for(var t in this._storageArea)e[t]=this._storageArea[t];else for(var r in arguments)this.exists(arguments[r])&&(e[arguments[r]]=this._storageArea[arguments[r]])},r.prototype=Object.create(e.prototype),r.prototype.set=function(e,t,r){if(r="undefined"==typeof r?!0:r,this.checkKey(e),void 0!==t&&"function"!=typeof t){"object"==typeof t&&(t=JSON.stringify(t));var o,i=r?this._cookieValidityTime:-1;if(window.ActiveXObject){var s=new Date((new Date).getTime()+1e3*i);o="; expires="+s.toGMTString()}else o="; max-age="+i;this._storageArea=e+"="+encodeURIComponent(t)+o}},r.prototype.get=function(e){this.checkKey(e),e+="=";for(var t=-1,r=this._storageArea.split(";"),o=0;o<r.length;o++){var i=r[o];if(0===i.trim().indexOf(e)){t=o;break}}if(-1===t)return void 0;var s=decodeURIComponent(r[t].trim().substring(e.length));try{return JSON.parse(s)}catch(n){return s}return s},r.prototype.exists=function(e){return void 0!==this.get(e)},r.prototype.remove=function(e){if(e instanceof Array)for(var t in e)""!==e[t]&&this.set(e[t],"",!1);else this.set(e,"",!1)},r.prototype.clear=function(){this.remove(this.getKeys())},r.prototype.getKeys=function(){for(var e=this._storageArea.split(";"),t=[],r=0;r<e.length;r++){var o=e[r];o=o.substring(0,o.indexOf("=")),t.push(o.trim())}return t},window.storage=Object,window.storage="undefined"!=typeof window.localStorage?new t("local"):new r,"undefined"!=typeof window.sessionStorage&&(window.storage.session=new t("session"))}();
